\section{System architecture}

This section describes the proposed adaptive video delivery system. The video delivery system, depicted in Figure \ref{fig:videoDeliveryArchitecture}, consists of a client and a server, using DASH standard \cite{Stockhammer11} for adaptive video streaming. It streams an entire 360-degree video to the client, displaying only a portion of the video (where the user looks at) on the user's HMD.

\input{videoDeliveryArchitecture.tex}

A server maintains several video versions. It takes as an input a 360-degree video in equirectangular format and transforms each frame into desired geometrical layout. From there it creates a number of different video versions, each with a different QEC and encoded in 5 different bitrates.
 %based on the number of QECs, encoding each version in 5 different bitrates.
 The server splits all such encoded video versions in short duration segments that are delivered to the client in the bitrate that is just below the Internet speed connection.

A client detects the user's head movements, computes the FoV center, updates and diplays a new FoV video to the user on his/her HMD. It periodically sends a request to the server for the video segment, specifying a new FoV center. The server replies with the video version whose QEC is closest to the new FoV center.

A video segment size determines how often requests are sent to the server. It typically ranges from 2 seconds to 10 seconds per segment. Short segments are good to quickly adapt to head movement and bandwidth changes, but the video encoding requires a higher number of segments and streaming of this video results in larger manifest files. Shorter segments also increase the network overhead by frequent requests, as well as network delay because of the round trip time that is needed to establish a TCP connection\footnote{In case of non-persistent HTTP connection TCP connection is established with the server after each request.} and request a segment (which can both take significant time in case of very short segment sizes).

Longer segments are better in coding efficiency and quality than the shorter ones, however loose on the flexibility to adapt the stream to changes. If the client moves a head more often than the request for new segment is made, he/she will be displayed with a new FoV video that is extrapolated from the existing video version stored on the client. The longer the time between the requests, the longer the distance from the old to the new FoV center (i.e., FoV center distance) will be and the larger the quality degradation is expected of the displayed FoV video. We study these relations in the remainder of the paper to find the impact of the segment size/request rate and the FoV center distance on the viewport quality that is displayed to the user. We expect results to differ for different geometrical layouts. We are also interested to find out how many representations are needed to achieve a desired video quality, using the particular geometrical layout.
